<!-- public/influencers.html -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <!-- básico -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta property="og:locale" content="pt_BR" />
  <meta name="generator" content="handmade" />

  <!-- PRIVADO/SEM SEO -->
  <meta name="robots" content="noindex,nofollow,noarchive" />

  <!-- Título/OG específicos -->
  <title>Influenciadores — Campinho Interativo (Prováveis do Cartola FC)</title>
  <meta name="description" content="Área restrita para influenciadores: visualizar escalações e usar o campinho com arrastar e soltar (client-side)." />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Prováveis do Cartola FC" />
  <meta property="og:title" content="Influenciadores — Campinho Interativo" />
  <meta property="og:description" content="Área restrita para influenciadores com campinho interativo (drag & drop)." />
  <meta property="og:image" content="https://www.provaveisdocartola.com.br/assets/img/ui/og-cover.jpg" />

  <!-- ícone -->
  <link rel="icon" href="/assets/img/icons/icon.ico" type="image/x-icon" />

  <!-- CSS (CDN + local) -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="/assets/css/build/styles.css" />
  <link rel="stylesheet" href="https://cdn.provaveisdocartola.com.br/css/club-grid.css" />
  <link rel="stylesheet" href="/assets/css/build/navbar.css">

  <link rel="stylesheet" href="/assets/css/customizacao.css">

  <!-- GA4 (opcional; manter se quiser medir uso da página privada) -->
  <link rel="preconnect" href="https://www.google-analytics.com" />
  <link rel="preconnect" href="https://www.googletagmanager.com" />
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6TJ11HJVRG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-6TJ11HJVRG', { send_page_view: false });

    (function () {
      const DEBUG_GA = false;
      let lastHash = null;
      function sendPV(){
        const hash = location.hash || '';
        if (hash === lastHash) return;
        lastHash = hash;
        const team = (hash.replace(/^#/, '') || '(home)');
        gtag('event', 'page_view', {
          page_title: document.title,
          page_location: location.href,
          page_path: location.pathname + location.search + hash,
          team,
          ...(DEBUG_GA ? { debug_mode: true } : {})
        });
      }
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', sendPV);
      } else {
        sendPV();
      }
      window.addEventListener('load', sendPV);
      window.addEventListener('hashchange', sendPV);
      document.addEventListener('click', (e) => {
        const a = e.target.closest('a.club-btn[href^="#"]');
        if (!a) return;
        gtag('event', 'select_team', {
          team: a.getAttribute('href').slice(1),
          ...(DEBUG_GA ? { debug_mode: true } : {})
        });
      });
    })();
  </script>

  <!-- limpador de parâmetros -->
  <script>window.__CLEAN_PARAMS__ = true;</script>
  <script defer src="/assets/js/clean-params.js"></script>

  <!-- dados estruturados básicos -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"Prováveis do Cartola FC",
    "url":"https://www.provaveisdocartola.com.br/",
    "logo":"https://www.provaveisdocartola.com.br/assets/img/icons/icon.ico",
    "sameAs":[
      "https://www.youtube.com/@canal_especialista",
      "https://instagram.com/canal_especialista"
    ]
  }
  </script>

  <!-- Config global dos dados -->
  <script>
    window.LINEUPS_JSON = '/assets/data/lineups.json';
  </script>

  <style>
    /* substituir o CSS de .influ-hint */
   .influ-banner{
  width:var(--rail-w);
  max-width:var(--rail-max);
  margin:0 auto 20px;
  padding:8px 14px;
  text-align:center;
  color:#eaf3ff;
  border-radius:14px;
  background:
    linear-gradient(#0b192b,#0b192b) padding-box,
    linear-gradient(90deg,#22d3ee,#2ee59d) border-box;
  border:1px solid transparent;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
  animation:fadeSlide .35s ease-out;
}

    .influ-banner .bi{color:#2ee59d;margin-right:6px}
    .influ-banner .sep{opacity:.5;margin:0 8px}
    .influ-banner kbd{
      background:#0b1420;border:1px solid #1e2b3c;color:#eaf3ff;
      padding:1px 6px;border-radius:6px
    }
    @keyframes fadeSlide{from{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:none}}
    @media (max-width:576px){
      .influ-banner{font-size:.92rem;padding:8px 10px}
    }

    /* Override local: deixar os balões de desfalques maiores nesta página */
    .status-card .tag{
      font-size:.7rem;
      padding:4px 10px;
      border-radius:999px;
      background:#fff;
      border:1px solid rgba(0,0,0,.08);
      box-shadow:0 1px 4px rgba(0,0,0,.04);
      font-weight:500;
    }
  </style>
</head>

<body>
  <noscript style="display:block;padding:8px;background:#222;color:#eee;text-align:center">
    Esta página precisa de JavaScript para listar as partidas da rodada.
  </noscript>

  <script>
    try {
      localStorage.setItem('pdc_influ_mode', '1');
    } catch (e) {}
  </script>

  <!-- header -->
  <div data-include="header"></div>

  <!-- NAVBAR alinhada ao trilho 96%/1600px -->
  <div id="navbar-rail">
    <div data-include="navbar"></div>
  </div>

  <!-- CONTEÚDO PRINCIPAL NO TRILHO LARGO -->
  <main id="provaveis-container">
    <section class="mic-mast" aria-labelledby="mastTitle">
      <div class="mic-rail">
      <div class="influ-banner" role="status" aria-live="polite">
        <i class="bi bi-shield-lock-fill" aria-hidden="true"></i>
        <strong>Área exclusiva para influenciadores</strong>
        <span class="sep">•</span>
        <span>Arraste os jogadores no campinho</span>
        <span class="sep d-none d-sm-inline">•</span>
        <span class="d-none d-sm-inline">Dica: <kbd>duplo clique</kbd> restaura a posição</span>
      </div>

    <!-- usa a mesma navbar do site -->
    <div data-include="navbar-equipes"></div>

    <div class="esconde-campinho" hidden></div>
    <div class="ad-guard" aria-hidden="true"></div>

    <!-- onde os jogos são renderizados -->
    <div id="jogos-root"></div>

    <!-- includes: CTA e footer -->
    <div data-include="aviso-apoiadores"></div>
    <div data-include="footer"></div>
  </main>

  <!-- JS (ordem) -->
  <script defer src="/assets/js/layout.js"></script>
  <script defer src="/assets/js/navbar.js"></script>
  <script defer src="/assets/js/market-bar.js"></script>
  

  <!-- dados dos jogos -->
  <script defer src="/assets/js/jogos.data.js"></script>

  <!-- render dos jogos -->
  <script defer src="/assets/js/render-jogos.js"></script>
  <script defer src="/assets/js/club-grid.js"></script>

  <!-- meta de atualização / desfalques / arbitragem -->
  <script defer src="/assets/js/team-updates.js"></script>
  <script defer src="/assets/js/desfalques.js"></script>
  <script defer src="/assets/js/arbitragem.js"></script>
  <script defer src="/assets/js/aviso-escalacoes.js"></script>

  <!-- loader de mercado (corrigido para /assets/data) -->
  <script>
  (async () => {
    try {
      const r = await fetch('/assets/data/mercado.images.json', { cache: 'no-store' });
      if (!r.ok) return;
      const arr = await r.json();
      window.MERCADO = { byId: new Map(arr.map(a => [a.atleta_id, a])) };
    } catch {}
  })();
  </script>

  <script>window.DRAG_ENABLED = true;</script>
  <script src="/assets/js/pitch-render-influencers.js" defer></script>
  <script src="/assets/js/drag-players.js" defer></script>

  <script>
  // mapa base de posições
  const POS = {
    GOL:{x:50,y:90},
    'ZAG-L':{x:35,y:75}, 'ZAG-C':{x:50,y:75}, 'ZAG-R':{x:65,y:75},
    'LAT-L':{x:20,y:78}, 'LAT-R':{x:80,y:78},
    VOL:{x:50,y:65},
    'MEI-L':{x:30,y:58}, 'MEI-C':{x:50,y:55}, 'MEI-R':{x:70,y:58},
    'ATA-L':{x:35,y:30}, 'ATA-C':{x:50,y:25}, 'ATA-R':{x:65,y:30},
    TEC:{x:92,y:96}
  };

  // limpa qualquer persistência local de drag
  function clearDragStorage(){
    try {
      localStorage.removeItem('pitch_drag_positions');
      sessionStorage.removeItem('pitch_drag_positions');
    } catch (e) {}
  }

  // aplica posição do preset no elemento
  function applyPresetPos(el){
    const slot = el.dataset.slot; // ex.: "MEI-C"
    const p = POS[slot];
    if (!p) return;
    el.style.left = p.x + '%';
    el.style.top  = p.y + '%';
  }

  // reseta todos os jogadores
  function resetAllPlayers(){
    document.querySelectorAll('.player').forEach(el=>{
      el.removeAttribute('data-free-x');
      el.removeAttribute('data-free-y');
      el.style.left = '';
      el.style.top  = '';
      applyPresetPos(el);
    });
  }

  // F5: volta sempre para o preset
  window.addEventListener('DOMContentLoaded', () => {
    clearDragStorage();
    resetAllPlayers();

    // clique único no nome para resetar aquele jogador
    document.querySelectorAll('.player .cap').forEach(cap=>{
      cap.addEventListener('click', (e)=>{
        const el = e.currentTarget.closest('.player');
        el.removeAttribute('data-free-x');
        el.removeAttribute('data-free-y');
        el.style.left = '';
        el.style.top  = '';
        applyPresetPos(el);
      }, {once:false});
    });
  });

  // Drag com salvamento, garante que o módulo de drag NÃO grave no storage nesta página.
  // Caso precisar manter no admin somente, condicionar por pathname ou ?persist=1.
  </script>
</body>
</html>
